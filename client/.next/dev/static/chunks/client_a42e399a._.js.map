{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ADMIN/Desktop/Projects/Nova/client/context/CartContext.js"],"sourcesContent":["\"use client\";\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport function CartProvider({ children }) {\r\n    const [cart, setCart] = useState([]);\r\n    const [isCartOpen, setIsCartOpen] = useState(false);\r\n\r\n    // Load from LocalStorage\r\n    useEffect(() => {\r\n        const savedCart = localStorage.getItem('cart');\r\n        if (savedCart) {\r\n            try {\r\n                setCart(JSON.parse(savedCart));\r\n            } catch (e) {\r\n                console.error(\"Failed to parse cart\", e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Save to LocalStorage\r\n    useEffect(() => {\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }, [cart]);\r\n\r\n    const addToCart = (product, size) => {\r\n        setCart(prev => {\r\n            const existing = prev.find(item => item.id === (product._id || product.id) && item.size === size);\r\n            if (existing) {\r\n                return prev.map(item => item.id === (product._id || product.id) && item.size === size\r\n                    ? { ...item, quantity: item.quantity + 1 }\r\n                    : item);\r\n            } else {\r\n                return [...prev, {\r\n                    id: product._id || product.id,\r\n                    name: product.name,\r\n                    price: product.price,\r\n                    image: product.image,\r\n                    size: size,\r\n                    quantity: 1,\r\n                    category: product.category\r\n                }];\r\n            }\r\n        });\r\n        setIsCartOpen(true);\r\n    };\r\n\r\n    const removeFromCart = (id, size) => {\r\n        setCart(prev => prev.filter(item => !(item.id === id && item.size === size)));\r\n    };\r\n\r\n    const updateQuantity = (id, size, action) => {\r\n        setCart(prev => prev.map(item => {\r\n            if (item.id === id && item.size === size) {\r\n                const newQuantity = action === 'increase' ? item.quantity + 1 : item.quantity - 1;\r\n                return newQuantity > 0 ? { ...item, quantity: newQuantity } : item;\r\n            }\r\n            return item;\r\n        }));\r\n    };\r\n\r\n    const clearCart = () => setCart([]);\r\n\r\n    const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n    const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n    return (\r\n        <CartContext.Provider value={{\r\n            cart, addToCart, removeFromCart, updateQuantity, clearCart,\r\n            isCartOpen, setIsCartOpen, cartTotal, cartCount\r\n        }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n"],"names":[],"mappings":";;;;;;;AACA;;;AADA;;AAGA,MAAM,4BAAc,IAAA,wLAAa;AAE1B,SAAS,aAAa,EAAE,QAAQ,EAAE;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,mLAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mLAAQ,EAAC;IAE7C,yBAAyB;IACzB,IAAA,oLAAS;kCAAC;YACN,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,IAAI,WAAW;gBACX,IAAI;oBACA,QAAQ,KAAK,KAAK,CAAC;gBACvB,EAAE,OAAO,GAAG;oBACR,QAAQ,KAAK,CAAC,wBAAwB;gBAC1C;YACJ;QACJ;iCAAG,EAAE;IAEL,uBAAuB;IACvB,IAAA,oLAAS;kCAAC;YACN,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAChD;iCAAG;QAAC;KAAK;IAET,MAAM,YAAY,CAAC,SAAS;QACxB,QAAQ,CAAA;YACJ,MAAM,WAAW,KAAK,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,CAAC,QAAQ,GAAG,IAAI,QAAQ,EAAE,KAAK,KAAK,IAAI,KAAK;YAC5F,IAAI,UAAU;gBACV,OAAO,KAAK,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,CAAC,QAAQ,GAAG,IAAI,QAAQ,EAAE,KAAK,KAAK,IAAI,KAAK,OAC3E;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IACvC;YACV,OAAO;gBACH,OAAO;uBAAI;oBAAM;wBACb,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;wBAC7B,MAAM,QAAQ,IAAI;wBAClB,OAAO,QAAQ,KAAK;wBACpB,OAAO,QAAQ,KAAK;wBACpB,MAAM;wBACN,UAAU;wBACV,UAAU,QAAQ,QAAQ;oBAC9B;iBAAE;YACN;QACJ;QACA,cAAc;IAClB;IAEA,MAAM,iBAAiB,CAAC,IAAI;QACxB,QAAQ,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,OAAQ,CAAC,CAAC,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,KAAK,IAAI;IAC9E;IAEA,MAAM,iBAAiB,CAAC,IAAI,MAAM;QAC9B,QAAQ,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACrB,IAAI,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM;oBACtC,MAAM,cAAc,WAAW,aAAa,KAAK,QAAQ,GAAG,IAAI,KAAK,QAAQ,GAAG;oBAChF,OAAO,cAAc,IAAI;wBAAE,GAAG,IAAI;wBAAE,UAAU;oBAAY,IAAI;gBAClE;gBACA,OAAO;YACX;IACJ;IAEA,MAAM,YAAY,IAAM,QAAQ,EAAE;IAElC,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAO,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAG;IACjF,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAElE,qBACI,uMAAC,YAAY,QAAQ;QAAC,OAAO;YACzB;YAAM;YAAW;YAAgB;YAAgB;YACjD;YAAY;YAAe;YAAW;QAC1C;kBACK;;;;;;AAGb;GAtEgB;KAAA;AAwET,MAAM,UAAU;;IAAM,OAAA,IAAA,qLAAU,EAAC;AAAW;IAAtC"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ADMIN/Desktop/Projects/Nova/client/app/components/CartSidebar.js"],"sourcesContent":["\"use client\";\r\nimport { useCart } from '@/context/CartContext';\r\nimport { X, Trash2, Minus, Plus, ShoppingBag } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function CartSidebar() {\r\n    const { cart, removeFromCart, updateQuantity, isCartOpen, setIsCartOpen, cartTotal } = useCart();\r\n    const router = useRouter();\r\n\r\n    const handleCheckout = () => {\r\n        setIsCartOpen(false);\r\n        router.push('/checkout');\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isCartOpen && (\r\n                <>\r\n                    {/* Backdrop */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40\"\r\n                        onClick={() => setIsCartOpen(false)}\r\n                    />\r\n\r\n                    {/* Sidebar */}\r\n                    <motion.div\r\n                        initial={{ x: '100%' }}\r\n                        animate={{ x: 0 }}\r\n                        exit={{ x: '100%' }}\r\n                        transition={{ type: 'spring', damping: 25, stiffness: 200 }}\r\n                        className=\"fixed top-0 right-0 w-full md:w-96 h-full bg-white/90 backdrop-blur-xl z-50 border-l border-white/20 shadow-2xl flex flex-col\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-5 border-b border-gray-200 flex justify-between items-center bg-white/50\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <ShoppingBag size={20} />\r\n                                <h3 className=\"text-xl font-bold font-heading\">Your Cart ({cart.reduce((a, c) => a + c.quantity, 0)})</h3>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setIsCartOpen(false)}\r\n                                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n                            >\r\n                                <X size={24} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Cart Items */}\r\n                        <div className=\"flex-grow overflow-y-auto p-5 space-y-4\">\r\n                            {cart.length === 0 ? (\r\n                                <div className=\"h-full flex flex-col items-center justify-center text-gray-500 space-y-4\">\r\n                                    <ShoppingBag size={48} className=\"text-gray-300\" />\r\n                                    <p>Your cart is empty</p>\r\n                                    <button onClick={() => setIsCartOpen(false)} className=\"text-black underline text-sm hover:text-gray-600\">Start Shopping</button>\r\n                                </div>\r\n                            ) : (\r\n                                cart.map((item, idx) => (\r\n                                    <motion.div\r\n                                        layout\r\n                                        initial={{ opacity: 0, y: 20 }}\r\n                                        animate={{ opacity: 1, y: 0 }}\r\n                                        exit={{ opacity: 0, x: -100 }}\r\n                                        key={`${item.id}-${item.size}-${idx}`}\r\n                                        className=\"flex gap-4 p-3 bg-white/60 rounded-xl border border-gray-100 shadow-sm\"\r\n                                    >\r\n                                        <div className=\"w-20 h-20 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden\">\r\n                                            <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" />\r\n                                        </div>\r\n                                        <div className=\"flex-grow flex flex-col justify-between\">\r\n                                            <div className=\"flex justify-between items-start\">\r\n                                                <div>\r\n                                                    <h4 className=\"font-semibold text-sm line-clamp-1\">{item.name}</h4>\r\n                                                    <p className=\"text-xs text-gray-500\">Size: {item.size}</p>\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={() => removeFromCart(item.id, item.size)}\r\n                                                    className=\"text-gray-400 hover:text-red-500 transition-colors p-1\"\r\n                                                >\r\n                                                    <Trash2 size={16} />\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex justify-between items-end mt-2\">\r\n                                                <div className=\"flex items-center bg-gray-50 rounded-lg border border-gray-200\">\r\n                                                    <button\r\n                                                        onClick={() => updateQuantity(item.id, item.size, 'decrease')}\r\n                                                        className=\"px-2 py-1 hover:bg-gray-200 rounded-l-lg transition-colors\"\r\n                                                    >\r\n                                                        <Minus size={12} />\r\n                                                    </button>\r\n                                                    <span className=\"px-2 text-sm font-medium w-8 text-center\">{item.quantity}</span>\r\n                                                    <button\r\n                                                        onClick={() => updateQuantity(item.id, item.size, 'increase')}\r\n                                                        className=\"px-2 py-1 hover:bg-gray-200 rounded-r-lg transition-colors\"\r\n                                                    >\r\n                                                        <Plus size={12} />\r\n                                                    </button>\r\n                                                </div>\r\n                                                <span className=\"font-bold text-sm\">KES {(item.price * item.quantity).toLocaleString()}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        {cart.length > 0 && (\r\n                            <div className=\"p-5 border-t border-gray-200 bg-white/80 backdrop-blur-md\">\r\n                                <div className=\"space-y-3 mb-6\">\r\n                                    <div className=\"flex justify-between font-bold text-lg pt-2\">\r\n                                        <span>Subtotal</span>\r\n                                        <span>KES {cartTotal.toLocaleString()}</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-gray-500 text-center\">Shipping & taxes calculated at checkout</p>\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={handleCheckout}\r\n                                    className=\"w-full bg-black text-white font-bold py-4 rounded-xl hover:bg-gray-800 active:scale-[0.98] transition-all duration-200 flex items-center justify-center shadow-lg\"\r\n                                >\r\n                                    Proceed to Checkout\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}